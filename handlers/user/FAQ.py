from aiogram import Router, F
from aiogram.types import Message, CallbackQuery, InlineKeyboardMarkup, InlineKeyboardButton

router = Router()

# Ø³ÙˆØ§Ù„ â†” Ø¬ÙˆØ§Ø¨
FAQ = {
    "Ú†Ø·ÙˆØ± Ø­Ø³Ø§Ø¨Ù…Ùˆ Ø´Ø§Ø±Ú˜ Ú©Ù†Ù…ØŸ": "Ø§Ø² Ù…Ù†ÙˆÛŒ Ø±Ø¨Ø§ØªØŒ Ø¨Ø®Ø´ ğŸ’³ Ø¯Ø±ÛŒØ§ÙØª Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù† Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡ Ùˆ ØªØµÙˆÛŒØ± ÙÛŒØ´ Ø±Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú©Ù† Ùˆ Ù…Ù†ØªØ¸Ø± ØªØ§ÛŒÛŒØ¯ Ø§Ø¯Ù…ÛŒÙ† Ø¨Ø§Ø´.",
    "Ú†Ù‚Ø¯Ø± Ø²Ù…Ø§Ù† Ù„Ø§Ø²Ù… Ù‡Ø³ØªØ´ Ú©Ù‡ ÙÛŒØ´ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ ØªØ§ÛŒÛŒØ¯ Ø¨Ø´Ù‡ØŸ": "ØªØ§ÛŒÛŒØ¯ ÙÛŒØ´â€ŒÙ‡Ø§ Ù…Ø¹Ù…ÙˆÙ„Ø§ Ø¯Ø± Ú©Ù…ØªØ± Ø§Ø² 30 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒØ´Ù‡. Ø§Ú¯Ø± Ø¨ÛŒÙ† 12 Ø´Ø¨ ØªØ§ 8 ØµØ¨Ø­ Ø«Ø¨Øª Ø¨Ø´Ù‡ØŒ Ù…Ø¹Ù…ÙˆÙ„Ø§ ØªØ§ 9 ØµØ¨Ø­ ØªØ§ÛŒÛŒØ¯ Ù…ÛŒØ´Ù‡.",
    "Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø³Ø±ÙˆÛŒØ³ VPN Ø¨Ø®Ø±Ù…ØŸ": "Ø§Ø² Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÛŒ Â«Ø®Ø±ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³Â» Ø±Ùˆ Ø¨Ø²Ù† Ùˆ Ù¾Ù„Ù† Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ø› ÛŒÙˆØ²Ø±Ù†ÛŒÙ… Ùˆ Ù¾Ø³ÙˆØ±Ø¯ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø±Ø§Øª Ù…ÛŒØ§Ø¯.",
    "Ú†Ù‡ Ù†ÙˆØ¹ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯ÛŒØ¯ØŸ": "OpenVPNØŒ Cisco AnyConnectØŒ L2TPØŒ PPTPØŒ SSTP Ùˆ ... Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù†ÛŒØ§Ø²Øª Ù‚Ø§Ø¨Ù„ Ø§Ù†ØªØ®Ø§Ø¨Ù‡.",
    "Ø³Ø±ÙˆÛŒØ³ Ø¨Ø±Ø§ÛŒ Ú©Ø¯ÙˆÙ… Ø³ÛŒØ³ØªÙ…â€ŒØ¹Ø§Ù…Ù„â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŸ": "ÙˆÛŒÙ†Ø¯ÙˆØ²ØŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ØŒ iOSØŒ Ù…Ú© Ùˆ Ù„ÛŒÙ†ÙˆÚ©Ø³.",
    "Ø¨Ø¹Ø¯ Ø§Ø² Ø®Ø±ÛŒØ¯ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆÛŒØ³ Ú©ÛŒ Ø¨Ù‡ Ù…Ù† Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ù‡ØŸ": "Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø®Ø±ÛŒØ¯ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒØ´Ù‡.",
    "Ø§Ú¯Ù‡ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¨ÛŒØ§Ø¯ØŒ Ú†Ø¬ÙˆØ±ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ú¯ÛŒØ±Ù…ØŸ": "Ø§Ø² Ø¨Ø®Ø´ Â«Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒÂ» ÛŒØ§ Â«ğŸ“¬ Ø§Ù†ØªÙ‚Ø§Ø¯Ø§Øª Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§ØªÂ» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†.",
    "Ù…ÛŒØªÙˆÙ†Ù… Ú†Ù†Ø¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ù‡ ÛŒÙ‡ Ø³Ø±ÙˆÛŒØ³ ÙˆØµÙ„ Ú©Ù†Ù…ØŸ": "Ø¯Ø± Ø§Ú©Ø«Ø± Ù¾Ù„Ù†â€ŒÙ‡Ø§ 1 Ø§ØªØµØ§Ù„ Ù‡Ù…â€ŒØ²Ù…Ø§Ù† Ù…Ø¬Ø§Ø²Ù‡Ø› Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ú†Ù†Ø¯Ú©Ø§Ø±Ø¨Ø±Ù‡ Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´Ù†.",
    "Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±Ù… Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù…ØŒ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†Ù…ØŸ": "Ø§Ø² Ø¨Ø®Ø´ Â«Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù…Ù†Â» Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¬Ø¯Ø¯ Ø¨Ø±Ø§Øª Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒØ´Ù‡.",
    "Ø³Ø±ÙˆÛŒØ³ Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù… Ùˆ Ø§ÛŒÙ†Ø³ØªØ§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŸ": "Ø¨Ù„Ù‡ØŒ Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ± Ø²Ø¯Ù† ÙÛŒÙ„ØªØ±ÛŒÙ†Ú¯ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù†.",
    "Ù…ÛŒØªÙˆÙ†Ù… Ù‚Ø¨Ù„ Ø®Ø±ÛŒØ¯ØŒ ØªØ³Øª Ø¨Ú¯ÛŒØ±Ù…ØŸ": "Ú¯Ø§Ù‡ÛŒ ØªØ³Øª Ù…Ø­Ø¯ÙˆØ¯ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒØ´Ù‡Ø› Ø§Ø² Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø¯Ù‡.",
}
FAQ_ITEMS = list(FAQ.items())  # [(question, answer), ...]

def faq_list_keyboard() -> InlineKeyboardMarkup:
    rows = [[InlineKeyboardButton(text=q, callback_data=f"faq:{i}")]
            for i, (q, _) in enumerate(FAQ_ITEMS)]
    return InlineKeyboardMarkup(inline_keyboard=rows)

def answer_keyboard() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª", callback_data="faq:back")]
    ])

# Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ø³ÙˆØ§Ù„Ø§Øª
@router.message(F.text == "â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„")
async def show_faq(message: Message):
    await message.answer("Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ø³ÙˆØ§Ù„Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:", reply_markup=faq_list_keyboard())

# Ú©Ø§Ù„â€ŒØ¨Ú© Ø§ÛŒÙ†Ù„Ø§ÛŒÙ†
@router.callback_query(F.data.startswith("faq:"))
async def faq_callbacks(cb: CallbackQuery):
    action = cb.data.split("faq:")[1]

    if action == "back":
        await cb.message.edit_text("Ù„Ø·ÙØ§Ù‹ ÛŒÚ©ÛŒ Ø§Ø² Ø³ÙˆØ§Ù„Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:", reply_markup=faq_list_keyboard())
        await cb.answer()
        return

    # Ø¨Ø§ÛŒØ¯ Ø§Ù†Ø¯ÛŒØ³ Ù…Ø¹ØªØ¨Ø± Ø¨Ø§Ø´Ù‡
    try:
        idx = int(action)
        question, answer = FAQ_ITEMS[idx]
    except Exception:
        await cb.answer("âŒ Ø¯Ø§Ø¯Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø±.", show_alert=True)
        return

    text = f"â“ {question}\n\n{answer}"
    await cb.message.edit_text(text, reply_markup=answer_keyboard())
    await cb.answer()
