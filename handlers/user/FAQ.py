import asyncio

from aiogram import Router, F
from aiogram.fsm.context import FSMContext
from aiogram.types import Message, ReplyKeyboardMarkup, KeyboardButton

from keyboards.user_main_menu import user_main_menu_keyboard

router = Router()

FAQ = {
    "ฺุทูุฑ ุญุณุงุจูู ุดุงุฑฺ ฺฉููุ": "ุงุฒ ููู ุฑุจุงุชุ ุจุฎุด ๐ณ ุดุงุฑฺ ุญุณุงุจ ุฑู ุงูุชุฎุงุจ ฺฉู ู ูพุฑุฏุงุฎุช ุฑู ุงูุฌุงู ุจุฏู ู ุชุตูุฑ ูุด ุฑู ุงุฑุณุงู ฺฉู ู ููุชุธุฑ ุชุงุฏ ุงุฏูู ุจุงุด.",
    "ฺูุฏุฑ ุฒูุงู ูุงุฒู ูุณุชุด ฺฉู ูุด ุงุฑุณุงู ุดุฏู ุชุงุฏ ุจุดูุ": "ุชุงุฏ ูุด ูุง ุงุฑุณุงู ุดุฏู ูุนูููุง ุฏุฑ ฺฉูุชุฑ ุงุฒ 30 ุฏููู ุตูุฑุช ูฺฏุฑู. ุฏุฑุตูุฑุช ฺฉู ูุด ุฏุฑ ุจุงุฒู  ุฒูุงู 12 ุดุจ ุชุง 8 ุตุจุญ ุซุจุช ุจุดู ุชุง ูุนูููุง ุชุง 9 ุตุจุญ ุชุงุฏ ูุดู.",
    "ฺุทูุฑ ูโุชููู ุณุฑูุณ VPN ุจุฎุฑูุ": "ุงุฒ ููู ุงุตู ฺฏุฒูู  'ุฎุฑุฏ ุณุฑูุณ' ุฑู ุจุฒู ู ุจุนุฏ ูพูู ููุฑุฏ ูุธุฑุช ุฑู ุงูุชุฎุงุจ ฺฉู ุ ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุจุฑุงุช ุงุฑุณุงู ูุดู. ",
    "ฺู ููุน ุณุฑูุณโูุง ุงุฑุงุฆู ูโุฏุฏุ": "ุณุฑูุณโูุง ุดุงูู OpenVPNุ Cisco AnyConnect, L2tp, Pptp, Sstp ู ... ูุณุชู. ุจุณุชู ุจู ูุงุฒุช ูโุชูู ุงูุชุฎุงุจ ฺฉู.",
    "ุณุฑูุณ ุจุฑุง ฺฉุฏูู ุณุณุชูโุนุงููโูุง ฺฉุงุฑ ูโฺฉููุ": "ููุฏูุฒุ ุงูุฏุฑูุฏุ iOSุ ูฺฉ ู ูููฺฉุณ",
    "ุจุนุฏ ุงุฒ ุฎุฑุฏุ ุงุทูุงุนุงุช ุณุฑูุณ ฺฉ ุจู ูู ุฏุงุฏู ูโุดูุ": "ุจูุงูุงุตูู ุจุนุฏ ุงุฒ ุฎุฑุฏ ุงุทูุงุนุงุช ุณุฑูุณ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฑุงุช ุงุฑุณุงู ูโุดู.",
    "ุงฺฏู ูุดฺฉู ูพุด ุจุงุฏุ ฺุฌูุฑ ูพุดุชุจุงู ุจฺฏุฑูุ": "ุงุฒ ุจุฎุด 'ูพุดุชุจุงู' ุง '๐ฌ ุงูุชูุงุฏุงุช ู ูพุดููุงุฏุงุช' ุงุณุชูุงุฏู ฺฉู. ูพุงุณุฎ ุณุฑุน ูโฺฏุฑ.",
    "ูุชููู ฺูุฏ ุฏุณุชฺฏุงู ุจู ู ุณุฑูุณ ูุตู ฺฉููุ": "ุฏุฑ ุงฺฉุซุฑ ูพููโูุง ููุท 1 ุงุชุตุงู ููโุฒูุงู ูุฌุงุฒู. ุณุฑูุณ ูุง ฺูุฏ ฺฉุงุฑุจุฑู ุฏุฑ ุขูุฏู ุงุถุงูู ุฎูุงูุฏ ุดุฏ.",
    "ุฑูุฒ ุนุจูุฑู ุฑุง ูุฑุงููุด ฺฉุฑุฏูุ ฺฺฉุงุฑ ฺฉููุ": "ุงุฒ ุจุฎุด 'ุณุฑูุณโูุง ูู' ุงุทูุงุนุงุช ูุฌุฏุฏ ุจุฑุง ุดูุง ุงุฑุณุงู ูโุดู.",
    "ุณุฑูุณ ุจุง ุชูฺฏุฑุงู ู ุงูุณุชุง ฺฉุงุฑ ูโฺฉููุ": "ุจููุ ุชูุงู ุณุฑูุณโูุง ุจุฑุง ุฏูุฑ ุฒุฏู ููุชุฑูฺฏ ุจูููโุณุงุฒ ุดุฏู.",
    "ูุชููู ูุจู ุฎุฑุฏุ ุชุณุช ุจฺฏุฑูุ": "ุฏุฑ ุจุฑุฎ ุฒูุงูโูุง ุชุณุช ูุญุฏูุฏ ุงุฑุงุฆู ูุดู. ุงุฒ ุทุฑู ูพุดุชุจุงู ุฏุฑุฎูุงุณุช ุจุฏู.",

}


# โจ๏ธ ฺฉุจูุฑุฏ ุณูุงูุงุช
def faq_keyboard():
    buttons = [[KeyboardButton(text=q)] for q in FAQ.keys()]
    buttons.append([KeyboardButton(text="๐ ุจุงุฒฺฏุดุช ุจู ููู ุงุตู")])
    return ReplyKeyboardMarkup(keyboard=buttons, resize_keyboard=True)


# ๐ฅ ููุฏูุฑ ููุงุด ุณูุงูุงุช
@router.message(F.text == "โ ุณูุงูุงุช ูุชุฏุงูู")
async def show_faq(message: Message, state: FSMContext):
    await message.answer("ูุทูุงู ฺฉ ุงุฒ ุณูุงูุงุช ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:", reply_markup=faq_keyboard())
    asyncio.create_task(faq_timeout(state, message.chat.id, message.bot))


# ๐ค ููุฏูุฑ ูพุงุณุฎโุฏู ุจู ุงูุชุฎุงุจ ุณุคุงู
@router.message()
async def handle_faq_selection(message: Message, state: FSMContext):
    if message.text == "๐ ุจุงุฒฺฏุดุช ุจู ููู ุงุตู":
        await message.answer("ุจุงุฒฺฏุดุช ุจู ููู ุงุตู", reply_markup=user_main_menu_keyboard())
        return

    answer = FAQ.get(message.text)
    if answer:
        await message.answer(answer)
    else:
        await message.answer("โ ุณูุงู ูุงูุนุชุจุฑู. ูุทูุงู ุงุฒ ุฏฺฉููโูุง ููู ุงุณุชูุงุฏู ฺฉู.")


# โณ ุชุงูุฑ ุจุงุฒฺฏุดุช ุฎูุฏฺฉุงุฑ ุจู ููู
async def faq_timeout(state: FSMContext, chat_id: int, bot):
    await asyncio.sleep(300)
    await bot.send_message(chat_id, "ุจุงุฒฺฏุดุช ุจู ููู ุงุตู", reply_markup=user_main_menu_keyboard())
